\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[a4paper, margin=3cm]{geometry}
\usepackage{amsmath}
\usepackage{fontspec}
\usepackage{subcaption}
\usepackage{float}

\setmainfont[ Path = fonts/, Extension = .otf, UprightFont = *-regular,
  UprightFeatures = {LetterSpace=5, WordSpace=1.6}, BoldFont = *-bold,
  ItalicFeatures = {FakeSlant=0.2} ]{neue-haas-grotesk-display}

\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{tikz}
\usepackage{eso-pic}
\usetikzlibrary{arrows, shapes, positioning}

\begin{document}

    \begin{titlepage}
        \AddToShipoutPictureBG*{
            \begin{tikzpicture}[remember picture, overlay]
                \node[inner sep=1cm] at (current page.center) { \includegraphics[
                    width=\dimexpr\paperwidth-2cm\relax,
                    height=\dimexpr\paperheight-2cm\relax, keepaspectratio=false
                ]{foto/intro} };
            \end{tikzpicture}
        }

        \centering
        \vspace*{2cm}

        \raggedright
        \vspace{19cm}
        \noindent\hspace*{-1.1cm}
        {\fontsize{48pt}{48pt}\selectfont\bfseries\color{white} Ignition Finance\par}
        \vspace{0.5cm}
        \noindent\hspace*{-1.1cm}
        {\fontsize{12pt}{12pt}\selectfont\color{white} ERROR 404\par}
        \vfill
    \end{titlepage}

    \newgeometry{a4paper, left=25mm, right=25mm, top=25mm, bottom=25mm}
    \tableofcontents

\section*{Introduzione alla Documentazione di Ignition Finance}

Ignition Finance è un'applicazione mobile progettata per assistere gli utenti
nel raggiungimento dell'indipendenza finanziaria e nella pianificazione del
pensionamento anticipato (FIRE). Questa documentazione fornisce una guida
completa all'architettura, ai componenti e alle funzionalità dell'applicazione.
Sia che siate sviluppatori che contribuiscono al codice, tester che ne
verificano la stabilità, o semplici utenti interessati a comprendere i
meccanismi interni, troverete in queste pagine le informazioni necessarie.
\vspace{0.5cm}

\textbf{Contenuti della documentazione:}

\begin{itemize}
    \item \textbf{Architettura Generale:} Un'analisi dettagliata della struttura
    dell'applicazione, inclusi i suoi moduli principali (\texttt{data},
    \texttt{domain}, \texttt{presentation}, \texttt{di}) e le loro interazioni.
    \item \textbf{Componenti Chiave:} Una descrizione approfondita dei singoli
    componenti, quali i ViewModel, i Repository, le Entity di Room e i servizi
    di Firebase, corredata da esempi di codice e diagrammi esplicativi.
    \item \textbf{Flussi di Dati:} Spiegazioni chiare e precise su come i dati
    fluiscono attraverso l'applicazione, dall'interfaccia utente al database e
    alle API esterne.
    \item \textbf{Integrazioni Esterne:} Informazioni dettagliate sulle
    interazioni con servizi esterni quali Firebase (Authentication e Firestore),
    API finanziarie (Alpha Vantage, BCE) e il loro ruolo all'interno
    dell'applicazione.
    \item \textbf{Sincronizzazione Dati:} Un'esposizione dettagliata del sistema
    di sincronizzazione dati locale-remoto, basato su Android WorkManager,
    SyncWorker e SyncQueueItem, essenziale per garantire la consistenza dei
    dati.
    \item \textbf{Simulazione FIRE:} Una descrizione accurata dell'algoritmo di
    simulazione FIRE, il motore centrale che permette agli utenti di valutare la
    sostenibilità delle loro strategie finanziarie.
    \item \textbf{Considerazioni Architetturali:} Le motivazioni alla base delle
    scelte di design, i compromessi effettuati e le best practice seguite
    durante lo sviluppo.
\end{itemize}

\textbf{Obiettivo della Documentazione:}

L'obiettivo primario di questa documentazione è di fornire una risorsa completa,
accessibile e aggiornata per chiunque interagisca con Ignition Finance.
Auspichiamo che possa contribuire a:

\begin{itemize}
    \item Comprendere la struttura e il funzionamento dell'applicazione.
    \item Facilitare la contribuzione allo sviluppo e alla manutenzione del
    codice.
    \item Agevolare la risoluzione di problemi e bug.
    \item Promuovere un utilizzo più efficace dell'applicazione.
    \item Favorire un apprezzamento delle complessità e delle sfide intrinseche
    allo sviluppo di un'applicazione finanziaria mobile.
\end{itemize}

\vspace{0.5cm}

\textbf{Buona lettura!}
\vspace{2cm}
\vspace{0.5cm}
\section{Funzionalità dell'Applicazione Ignition
Finance}\label{sec:funzionalita-dell'applicazione-ignition-finance}

Ignition Finance è un'applicazione progettata per aiutare gli utenti a
raggiungere l'indipendenza finanziaria e la pensione anticipata (FIRE).
L'applicazione offre le seguenti funzionalità principali:

\begin{itemize}
    \item \textbf{Gestione del Portafoglio:} Permette agli utenti di tenere
    traccia dei propri investimenti, inclusi prodotti finanziari specifici
    (azioni, ETF, fondi comuni, ecc.) e liquidità.
    \item \textbf{Calcolo del Net Worth:} Calcola il patrimonio netto
    complessivo dell'utente, combinando il valore degli investimenti e della
    liquidità.
    \item \textbf{Simulazione FIRE:} Esegue simulazioni Monte Carlo per stimare
    la probabilità di successo del piano FIRE dell'utente, considerando diversi
    scenari economici e parametri personalizzabili.
    \item \textbf{Personalizzazione delle Impostazioni:} Consente agli utenti di
    personalizzare le impostazioni di simulazione, quali:
    \begin{itemize}
        \item \textit{Modello di Inflazione:} Scelta tra diversi modelli di
        inflazione (fisso, normale, scalato, lognormale).
        \item \textit{Strategia di Prelievo:} Definizione delle somme di
        prelievo annuali, considerando la presenza o meno di una pensione.
        \item \textit{Spese:} Impostazione delle spese, come le tasse, le
        imposte di bollo e le commissioni di gestione.
        \item \textit{Intervalli Temporali:} Definizione degli anni nella fase
        FIRE, degli anni di pensione e degli anni di buffer.
        \item \textit{Numero di Simulazioni:} Impostazione del numero di
        simulazioni Monte Carlo da eseguire.
    \end{itemize}
    \item \textbf{Analisi delle Performance:} Fornisce indicatori sulle
    performance del portafoglio, quali il rendimento medio, il miglior
    investimento e il peggior investimento.
    \item \textbf{Visualizzazione dei Dati:} Presenta i dati in modo chiaro e
    intuitivo tramite grafici e diagrammi.
    \item \textbf{Autenticazione Sicura:} Utilizza Firebase Authentication per
    garantire la sicurezza degli account utente.
    \item \textbf{Sincronizzazione dei Dati:} Sincronizza i dati tra il database
    locale e il cloud (Firestore) per garantire la disponibilità e la
    consistenza dei dati su diversi dispositivi.
\end{itemize}

Ignition Finance è quindi uno strumento completo e personalizzabile per la
pianificazione finanziaria e la simulazione FIRE, che consente agli utenti di
prendere decisioni informate e di monitorare i progressi verso i propri
obiettivi finanziari.
\section*{Architettura Complessiva dell'Applicazione Ignition Finance: Un'Analisi Dettagliata}
\addcontentsline{toc}{section}{ARCHITETTURA COMPLESSIVA DELL'APPLICAZIONE IGNITION FINANCE}
\section{Preambolo}\label{sec:preambolo}

Questa sezione fornisce un'analisi approfondita dell'architettura complessiva
dell'applicazione Ignition Finance.
Oltre a delineare i componenti interni, si
concentra sulle loro relazioni e sulle modalità di interazione con componenti
esterni cruciali quali Firebase, API esterne e il database interno.
L'obiettivo
è fornire una visione chiara delle scelte di design e delle motivazioni che le
sottendono.

\section{Principi Guida
dell'Architettura}\label{sec:principi-guida-dell'architettura}

L'architettura di Ignition Finance è fondata sui seguenti principi chiave:

\begin{itemize}
    \item \textbf{Modularità:} L'applicazione è suddivisa in moduli indipendenti
    (package) per favorire lo sviluppo parallelo, la manutenzione semplificata e
    il riuso di componenti.
    \item \textbf{Separazione delle Responsabilità (SoC):} Ogni modulo è
    responsabile di un aspetto specifico dell'applicazione, riducendo
    l'accoppiamento e migliorando la coesione.
    \item \textbf{Testabilità:} L'architettura facilita la scrittura di test
    unitari e di integrazione, garantendo la qualità e la stabilità del codice.
    \item \textbf{Scalabilità:} L'applicazione è progettata per gestire un
    numero crescente di utenti e di dati, garantendo prestazioni ottimali.
    \item \textbf{Reattività:} L'interfaccia utente è reattiva e intuitiva,
    fornendo un'esperienza utente fluida e coinvolgente.
\end{itemize}

\section{Componenti Architetturali}\label{sec:componenti-architetturali}
\input{componenti-architetturali}

\section{Interazioni con Componenti Esterni: Un'Analisi
Approfondita}\label{sec:interazioni-con-componenti-esterni:-un'analisi-approfondita}

L'applicazione Ignition Finance si integra con diversi componenti esterni per
fornire funzionalità avanzate.

\subsection{Firebase: Autenticazione, Persistenza dei Dati e
Sincronizzazione}\label{subsec:firebase:-autenticazione-persistenza-dei-dati-e-sincronizzazione}
\begin{itemize}
  \item \textbf{Firebase Authentication:}\\
    Utilizzato per gestire l'autenticazione degli utenti, fornendo metodi per la
    registrazione, il login e il reset della password.
    \begin{itemize}
      \item \textit{Interazione:}\\
        I \texttt{ViewModel} relativi all'autenticazione \\(es:
        \texttt{LoginScreenViewModel}, \texttt{RegistrationScreenViewModel})
        interagiscono con l'interfaccia \texttt{AuthRepository} per autenticare
        gli utenti tramite Firebase Authentication.
    \end{itemize}

  \item \textbf{Firestore:}\\
    Utilizzato come database NoSQL per la persistenza dei dati nel cloud.
    \begin{itemize}
      \item \textit{Interazione:}\\
        I repository che richiedono l’accesso ai dati nel cloud (es:
        \texttt{FirestoreRepositoryImpl}) utilizzano il servizio
        \texttt{FirestoreService} per interagire con Firestore.
    \end{itemize}

  \item \textbf{Modalità di Sincronizzazione:}\\
    La sincronizzazione dei dati tra il database locale (Room) e Firestore è
    gestita dal \texttt{SyncWorker}, che esegue le operazioni di
    sincronizzazione in background.
    \begin{itemize}
      \item \textit{Logica:}\\
        Il \texttt{SyncWorker} legge le operazioni di sincronizzazione dalla
        tabella \texttt{sync\_queue\_items} nel database Room e le esegue su
        Firestore.
        Al termine dell'operazione, aggiorna lo stato dell'operazione
        nella tabella \texttt{sync\_queue\_items}.
    \end{itemize}
\end{itemize}

\subsection{API Esterne: Dati Finanziari in Tempo
Reale}\label{subsec:api-esterne:-dati-finanziari-in-tempo-reale}
\begin{itemize}
  \item \textbf{API Alpha Vantage:}\\
    Utilizzata per recuperare dati azionari storici e in tempo reale, quali
    quotazioni, volumi e indicatori di performance.
    \begin{itemize}
      \item \textit{Interazione:}\\
        I repository relativi ai dati azionari (es:
        \texttt{StockRepositoryImpl}, \texttt{SearchStockRepositoryImpl})
        utilizzano i servizi Retrofit (es: \texttt{StockService},
        \texttt{SearchStockService}) per interrogare l'API di Alpha Vantage.
    \end{itemize}

  \item \textbf{API della Banca Centrale Europea (ECB):}\\
    Utilizzata per recuperare dati sui tassi di cambio e sull'inflazione.
    \begin{itemize}
      \item \textit{Interazione:}\\
        I repository relativi ai tassi di cambio e all'inflazione \\(es:
        \texttt{ExchangeRepositoryImpl}, \texttt{InflationRepositoryImpl})
        utilizzano i servizi Retrofit (es: \texttt{ExchangeService},
        \texttt{InflationService}) per interrogare l'API della BCE\@.
    \end{itemize}
\end{itemize}

\subsection{Database Interno: Persistenza Locale e Gestione della
Sincronizzazione}\label{subsec:database-interno:-persistenza-locale-e-gestione-della-sincronizzazione}
\begin{itemize}
  \item \textbf{Room:}\\
    Framework di Android per la persistenza dei dati in locale.
    \begin{itemize}
      \item \textit{Ruolo:}\\
        Utilizzato per memorizzare i dati degli utenti, le impostazioni, i
        prodotti del portafoglio e la coda di sincronizzazione.

      \item \textit{Interazione:}\\
        I repository che richiedono l'accesso ai dati locali (es:
        \texttt{LocalDatabaseRepositoryImpl}) utilizzano le DAO (es:
        \texttt{UserDao}, \texttt{SyncQueueItemDao}) per interagire con il
        database Room.
    \end{itemize}
\end{itemize}
\section{Architettura del Flusso di
Dati}\label{sec:architettura-del-flusso-di-dati}

Un flusso di dati tipico nell'applicazione segue il seguente schema:

\begin{enumerate}
\item L'utente interagisce con l'UI (Composables).
\item L'UI invoca una funzione nel ViewModel.
\item Il ViewModel invoca un use case nel package \texttt{domain}.
\item L'use case interagisce con uno o più repository nel package \texttt{data}.
\item I repository accedono alle sorgenti dati (Firebase, API esterne, database
locale).
\item I dati vengono convertiti dai mapper nei modelli di dominio appropriati.
\item I dati vengono restituiti all'use case.
\item L'use case elabora i dati e li restituisce al ViewModel.
\item Il ViewModel aggiorna lo stato dell'UI (StateFlow).
\item L'UI osserva i cambiamenti dello stato e si aggiorna di conseguenza.
\end{enumerate}

\section{Considerazioni}\label{sec:considerazioni}

L'architettura dell'applicazione Ignition Finance è stata progettata con
attenzione per garantire la modularità, la separazione delle responsabilità, la
testabilità e la scalabilità.
L'utilizzo di tecnologie moderne come Jetpack
Compose, Coroutines e Hilt semplifica lo sviluppo e la manutenzione
dell'applicazione.
La comunicazione con componenti esterni è gestita in modo
efficace e flessibile, consentendo all'applicazione di adattarsi facilmente a
nuovi requisiti e a nuove tecnologie.
Le nostre scelte di design riflettono
l'impegno per un'architettura pulita, manutenibile e scalabile, con una
particolare attenzione alla robustezza, alla sicurezza e all'esperienza utente.
\vspace{7cm}
\section{Schema Architetturale
Complessivo}\label{sec:schema-architetturale-complessivo}
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{foto/architecture}
    \caption{}
    \label{fig:architecture}
\end{figure}

\section*{Algoritmo di Simulazione FIRE (Financial Independence, Retire Early)}
\addcontentsline{toc}{section}{ALGORITMO DI SIMULAZIONE FIRE (FINANCIAL INDEPENDENCE, RETIRE EARLY)}
   
    \section{Preambolo}\label{sec:preambolo2}

Il movimento Financial Independence, Retire Early (FIRE) \\ enfatizza il
    raggiungimento dell'indipendenza finanziaria e il pensionamento
    significativamente prima delle tradizionali età pensionabili.
    Fondamentale
    per la pianificazione FIRE è valutare la sostenibilità di una strategia
    prescelta in varie condizioni economiche.
    La simulazione svolge un ruolo
    fondamentale, consentendo agli individui di modellare la crescita del
    portafoglio, stimare tassi di prelievo sicuri e tenere conto di incertezze
    come la volatilità del mercato e l'inflazione.
    Questo documento presenta una
    descrizione teorica dettagliata di un algoritmo di simulazione FIRE
    progettato per questo scopo.
    Mira a fornire una comprensione completa della
    meccanica, delle ipotesi e delle potenziali applicazioni della simulazione.

    \section{Panoramica dell'Algoritmo}\label{sec:panoramica-dell'algoritmo}

L'algoritmo di simulazione FIRE è una simulazione di Monte Carlo progettata per
modellare la performance di un portafoglio su un periodo di lungo termine,
tenendo conto dei rendimenti di mercato, dell'inflazione, dei prelievi e di
altri parametri finanziari rilevanti.
Il principio fondamentale è generare una
moltitudine di possibili scenari futuri (simulazioni) e valutare il
comportamento del portafoglio in ciascuno di essi.\ Analizzando i risultati di
queste simulazioni, è possibile stimare la probabilità di raggiungere
l'indipendenza finanziaria e di mantenere uno stile di vita desiderato per tutto
il periodo di pensionamento pianificato.

    La simulazione opera iterativamente, modellando l'evoluzione del portafoglio
    su base annuale (o potenzialmente a intervalli di tempo più granulari).
    Ogni
    esecuzione di simulazione rappresenta un possibile futuro unico, guidato da
    rendimenti di mercato e tassi di inflazione campionati casualmente.
    L'algoritmo tiene traccia del valore del portafoglio, delle riserve di
    liquidità e degli importi dei prelievi, valutando se il portafoglio rimane
    solvibile durante l'orizzonte di simulazione (in genere diversi decenni).

    L'output chiave della simulazione è un tasso di successo, che rappresenta la
    percentuale di simulazioni in cui il portafoglio rimane al di sopra dello
    zero (o una soglia minima predefinita) alla fine del periodo di simulazione.
    Questo tasso di successo funge da misura probabilistica della fattibilità
    del piano.

    \section{Componenti e Moduli
    Fondamentali}\label{sec:componenti-e-moduli-fondamentali}
    \input{componenti-e-moduli ----fondamentali}

    \section{Assunzioni e Limitazioni}\label{sec:assunzioni-e-limitazioni}

L'algoritmo di simulazione FIRE si basa su diverse assunzioni che possono
influire sull'accuratezza dei risultati:
    \begin{itemize}
        \item \textbf{Dati Storici di Mercato:} L'algoritmo si basa spesso sui
        dati storici di mercato per modellare i rendimenti futuri.
        Le
        performance passate non sono necessariamente indicative dei risultati
        futuri e cambiamenti significativi nelle condizioni di mercato possono
        invalidare queste assunzioni.
        \item \textbf{Modellazione dell'Inflazione:} Allo stesso modo, il
        modello di inflazione si basa sui dati storici sull'inflazione.
        Cambiamenti imprevisti dell'inflazione possono influire
        significativamente sui risultati.
        \item \textbf{Strategia di Prelievo:} Si presuppone che la strategia di
        prelievo scelta sia costante per tutta la simulazione.
        Cambiamenti nelle
        abitudini di spesa o spese impreviste possono influire sulla
        sostenibilità del piano FIRE\@.
        \item \textbf{Leggi Fiscali e Regolamenti:} L'algoritmo presuppone che
        le leggi fiscali e i regolamenti rimarranno costanti per tutta la
        simulazione.
        Cambiamenti nelle politiche fiscali possono influire sulla
        crescita e sugli importi dei prelievi del portafoglio.
        \item \textbf{Commissioni di Investimento:} Il modello potrebbe
        semplificare il trattamento delle commissioni di investimento.
        È
        importante garantire che il modello li prenda in considerazione in modo
        accurato.
        \item \textbf{Eventi Cigno Nero:} Il modello non può prevedere o tenere
        conto di eventi \("\)cigno nero\("\) imprevisti (ad esempio, grandi
        crisi economiche, eventi geopolitici) che possono avere un impatto
        significativo sui rendimenti di mercato e sull'inflazione.
    \end{itemize}

    È fondamentale comprendere queste limitazioni e interpretare i risultati
    della simulazione con cautela.
    L'algoritmo di simulazione FIRE fornisce uno
    strumento prezioso per valutare la fattibilità dei piani FIRE, ma non deve
    essere considerato un predittore definitivo dei risultati futuri.

    \section{Considerazioni Avanzate}\label{sec:considerazioni-avanzate}

Oltre ai componenti principali descritti sopra, diverse considerazioni avanzate
possono essere incorporate nell'algoritmo di simulazione FIRE per migliorarne il
realismo e l'accuratezza:
    \begin{itemize}
        \item \textbf{Asset Allocation Dinamica:} Adeguare l'asset allocation
        nel tempo in base alle condizioni di mercato o alla fase di
        pensionamento.
        Ad esempio, passare dalle azioni alle obbligazioni quando
        ci si avvicina alla pensione.
        \item \textbf{Rischio della Sequenza dei Rendimenti:} Tenere conto
        dell'impatto della sequenza dei rendimenti, in cui i rendimenti negativi
        all'inizio del pensionamento possono avere un impatto
        sproporzionatamente grande sulla sostenibilità del portafoglio.
        \item \textbf{Riduzione della Varianza di Monte Carlo:} Tecniche per
        migliorare l'efficienza delle simulazioni di Monte Carlo riducendo la
        varianza delle stime.
        \item \textbf{Modellazione Dettagliata delle Imposte:} Modellazione più
        dettagliata delle imposte e dei regolamenti specifici che influiscono
        sui rendimenti degli investimenti e sui prelievi, potenzialmente
        personalizzata per giurisdizioni specifiche.
        \item \textbf{Incorporare Altre Fonti di Reddito:} Tenere conto di altre
        fonti di reddito, come pensioni, previdenza sociale o lavoro part-time,
        nel modello di prelievo.
        \item \textbf{Shock di Spesa:} Simulare spese impreviste (ad esempio,
        emergenze mediche, riparazioni domestiche) e il loro impatto sul piano
        FIRE\@.
    \end{itemize}

    \section{Considerazioni}\label{sec:considerazioni2}

L'algoritmo di simulazione FIRE è un potente strumento per valutare la
fattibilità dei piani FIRE. Modellando la performance del portafoglio in varie
condizioni di mercato, tassi di inflazione e strategie di prelievo, fornisce una
misura probabilistica della probabilità di raggiungere l'indipendenza
finanziaria e di mantenere uno stile di vita desiderato per tutto il periodo di
pensionamento.
Questo documento ha fornito una descrizione teorica completa dei
componenti, delle assunzioni e delle limitazioni dell'algoritmo, consentendo una
comprensione più approfondita della sua meccanica e delle sue applicazioni.
È
importante notare che l'algoritmo descritto è più utile quando è adattato alle
circostanze personali e utilizzato per mettere alla prova le assunzioni per
scenari futuri. \section*{Sistema di Sincronizzazione Dati Locale-Remoto}
\addcontentsline{toc}{section}{SISTEMA DI SINCRONIZZAZIONE DATI LOCALE-REMOTO)}

\section{Preambolo}\label{sec:preambolo3} La sincronizzazione dati tra app
mobile e DB remoto è cruciale.
Usiamo Android WorkManager e \texttt{SyncWorker}
per ADD, UPDATE, DELETE. La coda di sincronizzazione è gestita con
\texttt{SyncQueueItem}.

\section{Architettura del Sistema}\label{sec:architettura-del-sistema} Tre
componenti:
\begin{itemize}
    \item \textbf{SyncWorker}: Esegue la sincronizzazione.
    Usa
    \texttt{FirestoreRepository} e \texttt{LocalDatabaseRepository}.
    \item \textbf{SyncQueueItem}: Operazione in sospeso.
    Contiene ID,
    collezione, payload, tipo operazione, stato.
    \item \textbf{SyncQueueItemRepository}: Gestisce la coda di sincronizzazione
    nel DB locale.
\end{itemize}

\section{Componenti del Sistema}\label{sec:componenti-del-sistema}
\input{componenti-del-sistema}

\section{Flusso di Sincronizzazione}\label{sec:flusso-di-sincronizzazione}
\begin{enumerate}
    \item \textbf{Aggiunta/Modifica/Eliminazione}: Interazione utente.
    \item \textbf{Creazione SyncQueueItem}: Creazione elemento nella coda.
    \item \textbf{Pianificazione del Worker}: \texttt{SyncOperationScheduler}
    pianifica \texttt{SyncWorker}.
    \item \textbf{Esecuzione del Worker}:
    \begin{enumerate}
        \item \texttt{SyncWorker} recupera \texttt{SyncQueueItem} in stato
        \texttt{PENDING}.
        \item Esegue ADD, UPDATE, DELETE su Firestore.
        \item In caso di successo, aggiorna lo stato a \texttt{SUCCEEDED}.
        \item In caso di errore, aggiorna lo stato a \texttt{FAILED} e pianifica
        un retry.
    \end{enumerate}
    \item \textbf{Retry e Gestione Errori}: WorkManager gestisce i retry.
\end{enumerate}

\section{Gestione Errori e Retry}\label{sec:gestione-errori-e-retry}
\begin{itemize}
    \item \textbf{Retry con Backoff Esponenziale}: Riprova con intervallo
    crescente.
    \item \textbf{Numero Massimo di Tentativi}: Operazione considerata fallita.
    \item \textbf{Gestione Elementi Bloccati}: Riportati a \texttt{PENDING}.
\end{itemize}

\section{Considerazioni sulla
Performance}\label{sec:considerazioni-sulla-performance}
\begin{itemize}
    \item \textbf{Batching}: Raggruppare operazioni.
    \item \textbf{Constraints}: Connessione Wi-Fi e batteria.
    \item \textbf{Ottimizzazione Query}: Efficiente recupero elementi.
\end{itemize}

\section{Algoritmo di Sincronizzazione}\label{sec:algoritmo-di-sincronizzazione}
Logica di sincronizzazione tra Room e Firestore.

\subsection{Logica di Funzionamento}\label{subsec:logica-di-funzionamento}
\begin{enumerate}
    \item \textbf{Innesco Sincronizzazione}: Modifiche ai dati.
    \item \textbf{Creazione/Aggiornamento SyncQueueItem}: Creazione elemento nel
    DB locale.
    \item \textbf{Pianificazione SyncWorker}: Esecuzione periodica con
    WorkManager.
    \item \textbf{Esecuzione SyncWorker}:
        \begin{enumerate}
            \item \textbf{Recupero Elementi Pendenti}: Query:
            \begin{verbatim}
            SELECT * FROM sync_queue_items
            WHERE scheduled_for <= :timestamp AND status = :status
            \end{verbatim}
            \item \textbf{Elaborazione Batch}.
            \item \textbf{Esecuzione Operazioni}: ADD, UPDATE, DELETE con
            \texttt{FirestoreRepository}.
            \item \textbf{Gestione Risultati}:
            \begin{itemize}
                \item \texttt{Success}: Aggiorna a \texttt{SUCCEEDED}.
                \item \texttt{Error}: Aggiorna a \texttt{FAILED}, incrementa
                tentativi, calcola retry.
                \item \texttt{StaleData}: (UPDATE) Se i dati remoti sono più
                recenti.
                \item \texttt{Retry}: Errore temporaneo, riprova ad un orario
                futuro.
            \end{itemize}
            \item \textbf{Retry e Backoff}: Backoff esponenziale.
            \item \textbf{Gestione Errori Fatali}: \texttt{MAX\_RETRIES}
            superato, marcata come \texttt{ABANDONED}.
        \end{enumerate}
\end{enumerate}

\subsection{Gestione dei Conflitti}\label{subsec:gestione-dei-conflitti}
Strategia per UPDATE:
\begin{itemize}
    \item \textbf{Controllo Timestamp}: Confronta timestamp locale e remoto.
    Se
    remoto è più recente, \texttt{StaleData}.
\end{itemize}

\subsection{Pulizia della Coda}\label{subsec:pulizia-della-coda}
\begin{itemize}
    \item \textbf{Rimozione Elementi SUCCEEDED}.
    \item \textbf{Rimozione Elementi ABANDONED}.
    \item \textbf{Gestione Elementi Bloccati}: Riportati a \texttt{PENDING} dopo
    \texttt{SYNC\_TIMEOUT\_MS}.
\end{itemize}
\vspace{0.5cm}

\section*{Grafica UI/UX}
\addcontentsline{toc}{section}{GRAFICA UI UX}
\section{Preambolo}\label{sec:preambolo4}

La UI/UX di \textbf{IgnitionFinance} è stata progettata con un approccio
minimalista, fortemente ispirato allo Swiss Design.
Utilizzando la tipografia
\textbf{Neue Haas Grotesk Display} in uno stile audace e BOLD, ogni elemento è
studiato per trasmettere chiarezza, eleganza e professionalità.
La scelta di una
palette monocromatica, basata su una scala di grigi dal nero al bianco, non solo
facilita la transizione tra i temi chiaro e scuro, ma conferisce anche all'app
un aspetto serio e sofisticato.

\vspace{\baselineskip}

\noindent Le interazioni, ispirate alle esperienze offerte da app come Spotify e
dall'orologio di Google, sono state progettate per garantire un'esperienza
utente fluida e intuitiva, in linea con l'obiettivo di semplificare la
simulazione del pensionamento anticipato/FIRE. Questo design integrato
sottolinea l'impegno di IgnitionFinance nel fornire strumenti moderni e
affidabili, capaci di unire funzionalità avanzate a un'estetica raffinata e
coerente.

\section{Ispirazione}\label{sec:ispirazione}

Il design di \textbf{IgnitionFinance} è fortemente influenzato dai principi
dello \textbf{Swiss Design}, caratterizzato da un'estetica pulita, una griglia
rigorosa e una tipografia chiara e leggibile.
L'obiettivo principale è garantire
un'interfaccia moderna, funzionale e priva di elementi superflui, in modo da
massimizzare l'efficacia della comunicazione visiva.

\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{foto/swiss_design}
    \caption{Esempio di Swiss Design che ha ispirato l’interfaccia.}
    \label{fig:swiss_design}
\end{figure}

\vspace{\baselineskip}

Un altro aspetto chiave dell'ispirazione proviene dalle esperienze utente
offerte da applicazioni di riferimento come \textbf{Spotify} e
l’\textbf{Orologio di Google}.
In particolare:
\begin{itemize}
    \item Da \textbf{Spotify}, l'app riprende il sistema di navigazione fluido e
    l'uso strategico della tipografia BOLD per evidenziare informazioni
    cruciali.
    \item Dall’\textbf{Orologio di Google}, trae ispirazione per le interazioni
    minimali e intuitive, con transizioni morbide e un focus su un design
    essenziale.
\end{itemize}

\vspace{\baselineskip}

\noindent Di seguito alcuni riferimenti visivi che hanno guidato il processo di
design:

\begin{figure}[H]
    \centering
    \begin{minipage}{0.24\textwidth}
        \centering
        \includegraphics[width=\textwidth]{foto/google_clock_app}
        \label{fig:google_clock}
    \end{minipage}
    \hfill
    \begin{minipage}{0.24\textwidth}
        \centering
        \includegraphics[width=\textwidth]{foto/portfolio_screen}
        \label{fig:portfolio_screen}
    \end{minipage}
    \hfill
    \begin{minipage}{0.24\textwidth}
        \centering
        \includegraphics[width=\textwidth]{foto/swipe_interaction_spotify}
        \label{fig:spotify_swipe}
    \end{minipage}
    \hfill
    \begin{minipage}{0.24\textwidth}
        \centering
        \includegraphics[width=\textwidth]{foto/swipe_interaction}
        \label{fig:swipe_delete}
    \end{minipage}
\end{figure}

\definecolor{light1}{HTML}{19191B}
\definecolor{light2}{HTML}{787878}
\definecolor{light3}{HTML}{F8F8F8}
\definecolor{light4}{HTML}{E6E6E6}
\definecolor{light5}{HTML}{BEBEBE}
\definecolor{light6}{HTML}{E1E1E1}
\definecolor{light7}{HTML}{8E8E8E}

\definecolor{dark1}{HTML}{E4E4E6}
\definecolor{dark2}{HTML}{878787}
\definecolor{dark3}{HTML}{070707}
\definecolor{dark4}{HTML}{191919}
\definecolor{dark5}{HTML}{414141}
\definecolor{dark6}{HTML}{1E1E1E}
\definecolor{dark7}{HTML}{717171}

\section{Colori e Tipografia}\label{sec:colori_tipografia}
\input{colori-e-tipografia}

\section*{Conclusioni}
\input{conclusioni}

\end{document}